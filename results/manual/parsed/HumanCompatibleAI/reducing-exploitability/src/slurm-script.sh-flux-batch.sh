#!/bin/bash
#FLUX: --job-name=reproduce-systematic
#FLUX: -c=22
#FLUX: --queue=savio2
#FLUX: -t=57600
#FLUX: --urgency=16

export CUDA_VISIBLE_DEVICES='-1'
export WANDB_CACHE_DIR='/global/scratch/users/${USER}/wandb_cache'

module load python
source /global/home/users/${USER}/.bashrc
source activate /global/scratch/users/${USER}/conda_envs/ray-source-2
export CUDA_VISIBLE_DEVICES=-1
export WANDB_CACHE_DIR=/global/scratch/users/${USER}/wandb_cache
python -V
python -m aprl_defense.train --alg ppo --wandb-group $SLURM_JOB_NAME --policy-cache /global/scratch/users/${USER}/policy_cache/$SLURM_JOBID --mode single-trainer-pbt --num-workers 15 --checkpoint-freq-M 2 --max-timesteps 1000000 --out-path /global/scratch/users/${USER}/out/rllib --env os_laser_tag_zs --harden-id 0 --num-ops 75 --override "{\"framework\":\"tf\"}" --description "commit 8 a0dcd6: main + fix"
